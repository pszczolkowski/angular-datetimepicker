/*
 * Angular DateTimePicker
 * version: 1.0.3
 */
"use strict";!function(a){!function(){a.module("pszczolkowski.dateTimePicker",["ui.bootstrap","dateParser"])}(),function(){function b(a,b,c,d,e){function f(){var b=c.open({size:"md",templateUrl:d.modalTemplate,controller:"DateTimePickerModalCtrl",resolve:{pickType:function(){return a.pickType},selectedDate:function(){return a.ngModel},constraints:function(){return a.constraints}}});b.result.then(function(b){void 0!==b&&(null===b?a.ngModel=void 0:a.ngModel=b)})}a.pickDate=f,b(function(){a.ngModel&&(a.ngModel=e.roundTimeToMinuteStep(a.ngModel,a.constraints.minuteStep||d.minuteStep))})}a.module("pszczolkowski.dateTimePicker").controller("DateTimePickerCtrl",b),b.$inject=["$scope","$timeout","$modal","dateTimePicker","dtpUtils"]}(),function(){function b(a,b,c,d,e,f){function g(b){a.calendar.month+=b;var c=a.calendar.month%12,d=Math.floor(a.calendar.month/12);a.calendar.year+=d,a.calendar.month=0>c?12+c:c,o(),p()}function h(){g(-1)}function i(){g(1)}function j(b){a.calendar.month=b}function k(b){a.calendar.year+=b,o(),p()}function l(){k(-1)}function m(){k(1)}function n(b){a.calendar.year=b}function o(){a.months=[];for(var b=0;12>b;b++)a.calendar.year===f.dateMin.getFullYear()&&b<f.dateMin.getMonth()&&(a.months[b]=!1),a.calendar.year===f.dateMax.getFullYear()&&b>f.dateMax.getMonth()&&(a.months[b]=!1),a.months[b]=!0}function p(){var b=Math.max(u.getFullYear(),a.calendar.year)+5,c=Math.min(b,f.dateMax.getFullYear());a.years=[];for(var d=c;d>=f.dateMin.getFullYear();d--)a.years.push(d)}function q(){var c=null;void 0!==a.date.selectedDay&&(c=new Date,c.setTime(a.date.selectedDay.getTime()),("datetime"===d||"time"===d)&&(c.setHours(a.date.selectedTime.getHours()),c.setMinutes(a.date.selectedTime.getMinutes()))),b.close(c)}function r(){b.dismiss("cancel")}function s(){var b=new Date;a.calendar.month=b.getMonth(),a.calendar.year=b.getFullYear()}function t(){a.date.selectedDay=void 0}var u=new Date;e instanceof Date||(e=void 0),f.dateMin=f.dateMin||c.minimumDate,f.dateMax=f.dateMax||c.maximumDate,a.pickType=d,a.calendar={month:e?e.getMonth():u.getMonth(),year:e?e.getFullYear():u.getFullYear(),selectedDayDate:e},a.date={selectedDay:e?new Date(e.getTime()):void 0,selectedTime:e?new Date(e.getTime()):void 0},a.months=[],a.years=[],a.minusMonth=h,a.plusMonth=i,a.setMonth=j,a.plusYear=m,a.minusYear=l,a.setYear=n,a.confirm=q,a.cancel=r,a.jumpToToday=s,a.clear=t,a.constraints=f,o(),p()}a.module("pszczolkowski.dateTimePicker").controller("DateTimePickerModalCtrl",b),b.$inject=["$scope","$modalInstance","dateTimePicker","pickType","selectedDate","constraints"]}(),function(){function b(a,b,c,d){return{scope:{inputConstraints:"=",pickType:"=datePickerInput"},require:"ngModel",link:function(e,f,g,h){function i(){h.$setValidity("format",!0),h.$setValidity("date",!0),h.$setValidity("required",!0)}function j(a){h.$setValidity(a,!1)}function k(){return"datetime"===e.pickType||"date"===e.pickType}function l(){return"datetime"===e.pickType||"time"===e.pickType}function m(a){var b=e.inputConstraints.dateMin||c.minimumDate,f=e.inputConstraints.dateMax||c.maximumDate;return f=d.endOfDay(f),b>a||a>f}function n(a){var b=e.inputConstraints.minuteStep||c.minuteStep;return a.getMinutes()%b!==0}function o(a){var b=e.inputConstraints.hourMin;void 0===b&&(b=c.minimumHour);var d=e.inputConstraints.hourMax;return void 0===d&&(d=c.maximumHour),a.getHours()<b||a.getHours()>d}h&&(h.$parsers.push(function(b){if(i(),""===b)return e.inputConstraints.required&&j("required"),null;var c=a(b,e.inputConstraints.dateFormat);if(void 0!==c){if(k()&&m(c))return j("date"),b;if(l()){if(n(c))return j("date"),b;if(o(c))return j("date"),b}return c}return j("format"),b}),h.$formatters.push(function(a){return i(),null!==a&&void 0!==a||!e.inputConstraints.required||j("required"),b(a,e.inputConstraints.dateFormat)}))}}}a.module("pszczolkowski.dateTimePicker").directive("datePickerInput",b),b.$inject=["$dateParser","dateFilter","dateTimePicker","dtpUtils"]}(),function(){function b(a){return{scope:{ngModel:"=",dateFormat:"@",dateMin:"=",dateMax:"="},require:"ngModel",templateUrl:"templates/dateTimePickerInput.html",replace:!0,link:function(b,c,d){b.pickType="date",b.constraints={dateFormat:b.dateFormat||a.dateFormat,dateMin:b.dateMin,dateMax:b.dateMax,required:d.required,placeholder:d.placeholder,showWeekNumbers:void 0!==d.showWeekNumbers?!0:a.showWeekNumbers}},controller:"DateTimePickerCtrl"}}a.module("pszczolkowski.dateTimePicker").directive("datePicker",b),b.$inject=["dateTimePicker"]}(),function(){function b(a){return{scope:{ngModel:"=",dateFormat:"@",dateMin:"=",dateMax:"=",hourMin:"@",hourMax:"@",minuteStep:"="},require:"ngModel",templateUrl:"templates/dateTimePickerInput.html",replace:!0,link:function(b,c,d){b.pickType="datetime",b.constraints={dateFormat:b.dateFormat||a.dateTimeFormat,dateMin:b.dateMin,dateMax:b.dateMax,hourMin:b.hourMin,hourMax:b.hourMax,minuteStep:b.minuteStep,required:d.required,placeholder:d.placeholder,showWeekNumbers:void 0!==d.showWeekNumbers?!0:a.showWeekNumbers}},controller:"DateTimePickerCtrl"}}a.module("pszczolkowski.dateTimePicker").directive("dateTimePicker",b),b.$inject=["dateTimePicker"]}(),function(){function b(a,b){function c(c){function d(){var a=c.ngModel||new Date,b=a.getHours();void 0!==c.constraints.hourMin&&b<c.constraints.hourMin?(c.ngModel.setHours(c.constraints.hourMin),c.ngModel.setMinutes(0)):void 0!==c.constraints.hourMax&&b>c.constraints.hourMax?(c.ngModel.setHours(c.constraints.hourMax),c.ngModel.setMinutes(0)):e(),f()}function e(){c.ngModel=b.roundTimeToMinuteStep(c.ngModel,c.constraints.minuteStep)}function f(){c.selectedTime.hour=c.ngModel.getHours(),c.selectedTime.minute=c.ngModel.getMinutes()}function g(){for(var a=void 0===c.constraints.hourMax?23:c.constraints.hourMax,b=void 0===c.constraints.hourMin?0:c.constraints.hourMin,d=a;d>=b;d--)c.hours.push(d)}function h(){if(c.minutes=[],void 0!==c.constraints.hourMax&&c.ngModel.getHours()>=c.constraints.hourMax)c.minutes.push(0);else for(var a=60-c.constraints.minuteStep;a>=0;a-=c.constraints.minuteStep)c.minutes.push(a)}function i(a){p(c.ngModel.getHours()+a)}function j(){void 0!==c.constraints.hourMin&&c.ngModel.getHours()<c.constraints.hourMin?c.ngModel.setHours(c.constraints.hourMin):void 0!==c.constraints.hourMax&&c.ngModel.getHours()>=c.constraints.hourMax&&(c.ngModel.setHours(c.constraints.hourMax),c.ngModel.setMinutes(0))}function k(){i(-1)}function l(){i(1)}function m(a){q((c.selectedTime.minute+a+60)%60)}function n(){m(-c.constraints.minuteStep)}function o(){m(c.constraints.minuteStep)}function p(a){c.ngModel.setHours(a),j(),f(),h()}function q(a){c.ngModel.setMinutes(a),f()}if(c.constraints={hourMin:c.hourMin?parseInt(c.hourMin,10):void 0,hourMax:c.hourMax?parseInt(c.hourMax,10):void 0,minuteStep:c.minuteStep?parseInt(c.minuteStep,10):a.minuteStep},c.ngModel=c.ngModel||new Date,c.hours=[],c.minutes=[],c.selectedTime={hour:c.ngModel.getHours(),minute:c.ngModel.getMinutes()},c.minusHour=k,c.plusHour=l,c.minusMinute=n,c.plusMinute=o,c.setHour=p,c.setMinute=q,c.constraints.hourMin&&c.constraints.hourMax&&c.constraints.hourMin>c.constraints.hourMax)throw"Minimum hour constraint can't be grater than maximum hour constraint";d(),g(),h()}return{templateUrl:function(){return a.timerTemplate},require:"ngModel",scope:{ngModel:"=",hourMin:"@",hourMax:"@",minuteStep:"@"},link:c}}a.module("pszczolkowski.dateTimePicker").directive("dtpTimer",b),b.$inject=["dateTimePicker","dtpUtils"]}(),function(){function b(a,b,c){function d(d){function e(){d.calendarMonth=l.getMonth(),d.calendarYear=l.getFullYear()}function f(a){a.before(d.dateMin)||a.after(d.dateMax)||(d.ngModel=a.toDate(),l=g(d.ngModel),e(),h())}function g(a){return new Date(a.getFullYear(),a.getMonth(),1)}function h(){var b=new Date(l.getFullYear(),l.getMonth(),1),e=[],f=new Date(l.getFullYear(),l.getMonth()+1,0);for(d.weeks=[],c.isSunday(b)?b.setDate(b.getDate()-6):b.setDate(b.getDate()-b.getDay()+1),c.isSunday(f)||f.setDate(f.getDate()+7-f.getDay());f>=b;)1===b.getDay()&&(e={days:[],num:i(b)},d.weeks.push(e)),e.days.push(new a(b)),b.setDate(b.getDate()+1)}function i(a){a=new Date(a.getTime()),a.setHours(0,0,0),a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1),c=Math.ceil(((a-b)/864e5+1)/7);return c}function j(){l.setFullYear(d.ngModel.getFullYear()),l.setMonth(d.ngModel.getMonth()),e(),h()}var k=new Date,l=g(d.ngModel?d.ngModel:k);d.weeks=[],d.dateMin=d.dateMin||b.minimumDate,d.dateMax=d.dateMax||b.maximumDate,d.today=new a(k),d.selectDay=f,d.goToSelectedDay=j,d.dateFormat=b.dateFormat,h(),d.$watch("calendarMonth",function(a){l.setMonth(a),h()}),d.$watch("calendarYear",function(a){l.setFullYear(a),h()})}return{templateUrl:function(){return b.calendarTemplate},require:"ngModel",scope:{ngModel:"=",calendarMonth:"=",calendarYear:"=",dateMin:"=",dateMax:"=",showWeekNumbers:"="},link:d}}a.module("pszczolkowski.dateTimePicker").directive("dtpCalendar",b),b.$inject=["dtpDay","dateTimePicker","dtpUtils"]}(),function(){function b(a){return{scope:{ngModel:"=",dateFormat:"@",hourMin:"@",hourMax:"@",minuteStep:"="},require:"ngModel",templateUrl:"templates/dateTimePickerInput.html",replace:!0,link:function(b,c,d){b.pickType="time",b.constraints={dateFormat:b.dateFormat||a.timeFormat,hourMin:b.hourMin,hourMax:b.hourMax,minuteStep:b.minuteStep,required:d.required,placeholder:d.placeholder,showWeekNumbers:void 0!==d.showWeekNumbers}},controller:"DateTimePickerCtrl"}}a.module("pszczolkowski.dateTimePicker").directive("timePicker",b),b.$inject=["dateTimePicker"]}(),function(){function b(){return function(a){var b=parseInt(a,10);return isNaN(b)?a:10>b?"0"+b:""+b}}a.module("pszczolkowski.dateTimePicker").filter("leadingZeros",b)}(),function(){a.module("pszczolkowski.dateTimePicker").provider("dateTimePicker",function(){this.dateFormat="yyyy-MM-dd",this.dateTimeFormat="yyyy-MM-dd HH:mm",this.timeFormat="HH:mm",this.minimumDate=new Date(1900,0,1),this.maximumDate=new Date(2099,11,31),this.minimumHour=void 0,this.maximumHour=void 0,this.minuteStep=1,this.showWeekNumbers=!1,this.calendarTemplate="templates/dateTimePickerCalendar.html",this.timerTemplate="templates/dateTimePickerTimer.html",this.modalTemplate="templates/dateTimePickerModal.html",this.$get=function(){return{dateFormat:this.dateFormat,dateTimeFormat:this.dateTimeFormat,timeFormat:this.timeFormat,minimumDate:this.minimumDate,maximumDate:this.maximumDate,minimumHour:this.minimumHour,maximumHour:this.maximumHour,minuteStep:this.minuteStep,showWeekNumbers:this.showWeekNumbers,calendarTemplate:this.calendarTemplate,timerTemplate:this.timerTemplate,modalTemplate:this.modalTemplate}}})}(),function(){function b(){function a(a){this.day=a.getDate(),this.month=a.getMonth(),this.year=a.getFullYear()}return a.prototype.equals=function(a){return a?a instanceof Date?this.day===a.getDate()&&this.month===a.getMonth()&&this.year===a.getFullYear():this.day===a.day&&this.month===a.month&&this.year===a.year:!1},a.prototype.before=function(a){var b=new Date;return b.setTime(a.getTime()),b.setFullYear(this.year),b.setMonth(this.month),b.setDate(this.day),a>b},a.prototype.after=function(a){var b=new Date;return b.setTime(a.getTime()),b.setFullYear(this.year),b.setMonth(this.month),b.setDate(this.day),b>a},a.prototype.toDate=function(){return new Date(this.year,this.month,this.day)},a}a.module("pszczolkowski.dateTimePicker").factory("dtpDay",b)}(),function(){function b(){function a(a){var b=new Date(a.getTime());return b.setHours(23,59,59),b}function b(a){return 0===a.getDay()}function c(a,b){a=new Date(a.getTime());var c=b*Math.round(a.getMinutes()/b);return c>59&&(a.setHours(a.getHours()+1),c=0),a.setMinutes(c),a}return{endOfDay:a,isSunday:b,roundTimeToMinuteStep:c}}a.module("pszczolkowski.dateTimePicker").factory("dtpUtils",b)}(),a.module("pszczolkowski.dateTimePicker").run(["$templateCache",function(a){a.put("templates/dateTimePickerCalendar.html",'<div> <table id="datepicker-calendar" class="table table-bordered text-center"> <thead> <tr> <th ng-if="showWeekNumbers"></th> <th class="text-center">Mon</th> <th class="text-center">Tue</th> <th class="text-center">Wed</th> <th class="text-center">Thu</th> <th class="text-center">Fri</th> <th class="text-center">Sat</th> <th class="text-center">Sun</th> </tr> </thead> <tbody> <tr ng-repeat="week in weeks"> <td class="datepicker-calendar-weekno" ng-if="showWeekNumbers"> {{week.num}} </td> <td ng-repeat="day in week.days" class="datepicker-calendar-day" ng-class="{\'datepicker-other-month\': day.month !== calendarMonth,\r\n									   \'datepicker-today\': today.equals(day),\r\n									   \'datepicker-selected\': day.equals(ngModel),\r\n									   \'datepicker-disabled\': day.before(dateMin) || day.after(dateMax)}" ng-click="selectDay(day)"> {{day.day}} </td> </tr> </tbody> </table> <p class="datepicker-selected-day-label"> <span ng-show="ngModel !== undefined"> <a href="" ng-click="goToSelectedDay()"> Jump to selected day: {{ngModel | date:dateFormat}} </a> </span> <span ng-show="ngModel === undefined"> No day is selected </span> </p> </div>'),a.put("templates/dateTimePickerInput.html",'<div ng-class="{\'has-error\': inputForm.$invalid && inputForm.$dirty}" ng-form="outerForm"> <div class="input-group" ng-form="inputForm"> <input type="text" class="datepicker-input form-control" ng-model="ngModel" date-picker-input="pickType" input-constraints="constraints" placeholder="{{constraints.placeholder}}"> <span class="input-group-btn"> <button class="btn btn-default" type="button" ng-click="pickDate()"> <span class="glyphicon glyphicon-calendar"></span> </button> </span> </div> </div>'),a.put("templates/dateTimePickerModal.html",'<div id="datepicker-body" class="modal-body"> <div class="row" ng-if="pickType === \'date\' || pickType === \'datetime\'"> <div class="col-xs-12 col-sm-7"> <div class="btn-group input-group"> <div class="input-group-btn"> <button class="btn btn-default" ng-click="minusMonth()" ng-disabled="calendar.month === constraints.dateMin.getMonth() && calendar.year === constraints.dateMin.getFullYear()"> <span class="glyphicon glyphicon-chevron-left"></span> </button> </div> <div id="datepicker-month-select" class="btn-group" ng-init="allMonths[0] = {num: 0, name: \'stycz\'}"> <button type="button" class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span ng-switch="calendar.month"> <span ng-switch-when="0">January</span> <span ng-switch-when="1">February</span> <span ng-switch-when="2">March</span> <span ng-switch-when="3">April</span> <span ng-switch-when="4">May</span> <span ng-switch-when="5">June</span> <span ng-switch-when="6">July</span> <span ng-switch-when="7">August</span> <span ng-switch-when="8">September</span> <span ng-switch-when="9">October</span> <span ng-switch-when="10">November</span> <span ng-switch-when="11">December</span> </span> <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li> <a href="" ng-click="setMonth(0)" ng-show="months[0]">January</a> <a href="" ng-click="setMonth(1)" ng-show="months[0]">February</a> <a href="" ng-click="setMonth(2)" ng-show="months[0]">March</a> <a href="" ng-click="setMonth(3)" ng-show="months[0]">April</a> <a href="" ng-click="setMonth(4)" ng-show="months[0]">May</a> <a href="" ng-click="setMonth(5)" ng-show="months[0]">June</a> <a href="" ng-click="setMonth(6)" ng-show="months[0]">July</a> <a href="" ng-click="setMonth(7)" ng-show="months[0]">August</a> <a href="" ng-click="setMonth(8)" ng-show="months[0]">September</a> <a href="" ng-click="setMonth(9)" ng-show="months[0]">October</a> <a href="" ng-click="setMonth(10)" ng-show="months[0]">November</a> <a href="" ng-click="setMonth(11)" ng-show="months[0]">December</a> </li> </ul> </div> <div class="input-group-btn"> <button class="btn btn-default" ng-click="plusMonth()" ng-disabled="calendar.month === constraints.dateMax.getMonth() && calendar.year === constraints.dateMax.getFullYear()"> <span class="glyphicon glyphicon-chevron-right"></span> </button> </div> </div> </div> <div class="col-xs-12 col-sm-5"> <div class="btn-group input-group"> <div class="input-group-btn"> <button class="btn btn-default" ng-click="minusYear()" ng-disabled="calendar.year === constraints.dateMin.getFullYear()"> <span class="glyphicon glyphicon-chevron-left"></span> </button> </div> <div id="datepicker-year-select" class="btn-group"> <button type="button" class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> {{calendar.year}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="year in years"> <a href="#" ng-click="setYear(year)">{{year}}</a> </li> </ul> </div> <div class="input-group-btn"> <button class="btn btn-default" ng-click="plusYear()" ng-disabled="calendar.year === constraints.dateMax.getFullYear()"> <span class="glyphicon glyphicon-chevron-right"></span> </button> </div> </div> </div> </div> <div class="row"> <div id="datepicker-calendar-wrapper" class="col-xs-12" ng-class="{\'col-sm-8\': pickType === \'datetime\'}" ng-if="pickType === \'date\' || pickType === \'datetime\'"> <div dtp-calendar ng-model="date.selectedDay" calendar-month="calendar.month" calendar-year="calendar.year" date-min="constraints.dateMin" date-max="constraints.dateMax" show-week-numbers="constraints.showWeekNumbers"></div> </div><div id="datepicker-time" class="col-xs-12 text-center" ng-class="{\'col-sm-4\': pickType === \'datetime\'}" ng-if="pickType === \'time\' || pickType === \'datetime\'"> <div dtp-timer ng-model="date.selectedTime" hour-min="{{constraints.hourMin}}" hour-max="{{constraints.hourMax}}" minute-step="{{constraints.minuteStep}}"></div> </div> </div> </div> <div class="modal-footer datepicker-buttons"> <div class="row"> <div class="col-xs-6 col-sm-2 text-left"> <button class="btn btn-block btn-default" ng-click="jumpToToday()" ng-if="pickType === \'date\' || pickType === \'datetime\'">Today </button> </div> <div class="col-xs-6 col-sm-2 text-left"> <button class="btn btn-block btn-default" ng-click="clear()" ng-if="!constraints.required && (pickType === \'date\' || pickType === \'datetime\')">Clear </button> </div> <div class="col-xs-12 col-sm-3 col-sm-offset-2"> <button class="btn btn-danger btn-block" ng-click="cancel()"> <span class="glyphicon glyphicon-remove"></span> Cancel </button> </div> <div class="col-xs-12 col-sm-3"> <button class="btn btn-success btn-block" ng-click="confirm()"> <span class="glyphicon glyphicon-ok"></span> Confirm </button> </div> </div> </div>'),a.put("templates/dateTimePickerTimer.html",'<div id="datepicker-timer"> <div class="btn-group-vertical" role="group"> <button class="btn btn-default" ng-click="plusHour()" ng-disabled="selectedTime.hour === constraints.hourMax"> <span class="glyphicon glyphicon-chevron-up"></span> </button> <div class="datepicker-time-view btn-group"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> {{selectedTime.hour}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="hour in hours"> <a href="#" ng-click="setHour(hour)">{{hour}}</a> </li> </ul> </div> <button class="btn btn-default" ng-click="minusHour()" ng-disabled="selectedTime.hour === constraints.hourMin"> <span class="glyphicon glyphicon-chevron-down"></span> </button> </div> <span>:</span> <div class="btn-group-vertical"> <button class="btn btn-default" ng-click="plusMinute()" ng-disabled="selectedTime.hour === constraints.hourMax"> <span class="glyphicon glyphicon-chevron-up"></span> </button> <div class="datepicker-time-view btn-group"> <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" ng-disabled="selectedTime.hour === constraints.hourMax"> {{selectedTime.minute | leadingZeros}} <span class="caret"></span> </button> <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"> <li ng-repeat="minute in minutes"> <a href="#" ng-click="setMinute(minute)">{{minute | leadingZeros}}</a> </li> </ul> </div> <button class="btn btn-default" ng-click="minusMinute()" ng-disabled="selectedTime.hour === constraints.hourMax"> <span class="glyphicon glyphicon-chevron-down"></span> </button> </div> </div>')}])}(angular);